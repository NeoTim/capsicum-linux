# These commands, executed from the same directory as this file, will
# build a UML kernel in the right place for the test scripts.

cp arch/um/defconfig .config
make menuconfig ARCH=um O=`pwd`/build
# (here you should enable CONFIG_SECURITY, CONFIG_DEBUG_FS,
# CONFIG_SECURITY_PATH, CONFIG_SECURITY_CAPSICUM, CONFIG_PROCDESC,
# CONFIG_64BIT)
make -j14 linux ARCH=um O=`pwd`/build/


# The following commands will build a native (non-UML) kernel in the
# right space for the test scripts to run tests in a KVM virtual
# machine.

make menuconfig O=`pwd`/build-native
# (Here you should enable the same CONFIG_ parameters as for the
# UML build above)
make -j14 bzImage O=`pwd`/build-native
